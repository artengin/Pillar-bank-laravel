{"openapi":"3.1.0","servers":[{"url":"http:\/\/localhost"}],"paths":{"\/registration":{"post":{"tags":["registration"],"consumes":["application\/json"],"produces":["application\/json"],"parameters":[],"responses":{"200":{"description":"Operation successfully done","content":{"application\/json":{"schema":{"type":"object","$ref":"#\/components\/schemas\/postRegistration200ResponseObject"},"example":{"token":"some-token","ttl":60,"refresh_ttl":20160,"user":{"first_name":"John","last_name":"Doe","phone":"1236743","email":"zhora_2@mail.ru","ssn":"111-11-2222"}}}}},"422":{"description":"Unprocessable Content","content":{"application\/json":{"schema":{"type":"object","$ref":"#\/components\/schemas\/postRegistration422ResponseObject"},"example":{"message":"The ssn field format is invalid.","errors":{"ssn":["The ssn field format is invalid."]}}}}},"423":{"description":"Locked","content":{"application\/json":{"schema":{"type":"object","$ref":"#\/components\/schemas\/postRegistration423ResponseObject"},"example":{"message":"Your account is blocked."}}}},"424":{"description":"Failed Dependency","content":{"application\/json":{"schema":{"type":"object","$ref":"#\/components\/schemas\/postRegistration424ResponseObject"},"example":{"message":"En error in work with KYC occurred. Response code: 403. Response data: {\"message\":\"This action is unauthorized.\"}"}}}}},"security":[],"description":"","deprecated":false,"requestBody":{"content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/registrationObject"}}},"description":"","required":true},"summary":"register"}},"\/login":{"post":{"tags":["login"],"consumes":["application\/json"],"produces":["application\/json"],"parameters":[],"responses":{"200":{"description":"Operation successfully done","content":{"application\/json":{"schema":{"type":"object","$ref":"#\/components\/schemas\/postLogin200ResponseObject"},"example":{"token":"some-token","ttl":60,"refresh_ttl":20160,"user":{"first_name":"john","last_name":"boms","phone":"11111111","email":"boms@gmail.com","ssn":"729-61-1829"}}}}},"401":{"description":"Unauthorized","content":{"application\/json":{"schema":{"type":"object","$ref":"#\/components\/schemas\/postLogin401ResponseObject"},"example":{"message":"These credentials do not match our records."}}}},"423":{"description":"Locked","content":{"application\/json":{"schema":{"type":"object","$ref":"#\/components\/schemas\/postLogin423ResponseObject"},"example":{"message":"Your account is blocked."}}}},"429":{"description":"Too Many Requests","content":{"application\/json":{"schema":{"type":"object","$ref":"#\/components\/schemas\/postLogin429ResponseObject"},"example":{"message":"Too Many Attempts."}}}},"422":{"description":"Unprocessable Content","content":{"application\/json":{"schema":{"type":"object","$ref":"#\/components\/schemas\/postLogin422ResponseObject"},"example":{"message":"The phone field is required. (and 1 more error)","errors":{"phone":["The phone field is required."],"password":["The password field is required."]}}}}}},"security":[],"description":"","deprecated":false,"requestBody":{"content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/loginObject"}}},"description":"","required":true},"summary":"login"}},"\/cards":{"post":{"tags":["cards"],"consumes":["application\/json"],"produces":["application\/json"],"parameters":[],"responses":{"401":{"description":"Unauthorized","content":{"application\/json":{"schema":{"type":"object","$ref":"#\/components\/schemas\/postCards401ResponseObject"},"example":{"message":"Unauthenticated."}}}},"201":{"description":"Created","content":{"application\/json":{"schema":{"type":"object","$ref":"#\/components\/schemas\/postCards201ResponseObject"},"example":{"id":9,"name":"BankCard","number":1500001000300200,"balance":0,"finished_at":"2022-11-11 11:11:11"}}}},"422":{"description":"Unprocessable Content","content":{"application\/json":{"schema":{"type":"object","$ref":"#\/components\/schemas\/postCards422ResponseObject"},"example":{"message":"The name field must have a value.","errors":{"name":["The name field must have a value."]}}}}}},"security":[],"description":"","deprecated":false,"summary":"issue","requestBody":{"content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/cardsObject"}}},"description":"","required":true}},"get":{"tags":["cards"],"consumes":["application\/json"],"produces":["application\/json"],"parameters":[{"in":"query","name":"page","description":"integer, min:1","schema":{"type":"integer"}},{"in":"query","name":"per_page","description":"integer, min:1","schema":{"type":"integer"}},{"in":"query","name":"query","description":"string","schema":{"type":"string"}},{"in":"query","name":"order_by","description":"string, in:id,user_id,name,number,balance,finished_at,status,reissued_id,*,created_at,updated_at","schema":{"type":"string"}},{"in":"query","name":"desc","description":"boolean","schema":{"type":"boolean"}},{"in":"query","name":"all","description":"boolean","schema":{"type":"boolean"}}],"responses":{"200":{"description":"Operation successfully done","content":{"application\/json":{"schema":{"type":"object","$ref":"#\/components\/schemas\/getCards200ResponseObject"},"example":{"data":[{"id":1,"name":"BankCard","number":1500001000300201,"balance":0,"finished_at":"2016-11-11 11:11:11"}],"links":{"first":"http:\/\/localhost\/cards?page=1","last":"http:\/\/localhost\/cards?page=1","prev":null,"next":null},"meta":{"current_page":1,"from":1,"last_page":1,"links":[{"url":null,"label":"&laquo; Previous","active":false},{"url":"http:\/\/localhost\/cards?page=1","label":"1","active":true},{"url":null,"label":"Next &raquo;","active":false}],"path":"http:\/\/localhost\/cards","per_page":1,"to":1,"total":1},"to":1,"total":1}}}}},"security":[],"description":"","deprecated":false,"summary":"search"}},"\/cards\/{id}":{"get":{"tags":["cards"],"consumes":["application\/json"],"produces":["application\/json"],"parameters":[{"in":"path","name":"id","description":"regexp: [0-9]+","required":true,"schema":{"type":"string"}}],"responses":{"401":{"description":"Unauthorized","content":{"application\/json":{"schema":{"type":"object","$ref":"#\/components\/schemas\/getCards{id}401ResponseObject"},"example":{"message":"Unauthenticated."}}}},"404":{"description":"This entity not found","content":{"application\/json":{"schema":{"type":"object","$ref":"#\/components\/schemas\/getCards{id}404ResponseObject"},"example":{"message":"Card does not exist"}}}},"403":{"description":"Forbidden","content":{"application\/json":{"schema":{"type":"object","$ref":"#\/components\/schemas\/getCards{id}403ResponseObject"},"example":{"message":"This action is unauthorized."}}}},"200":{"description":"Operation successfully done","content":{"application\/json":{"schema":{"type":"object","$ref":"#\/components\/schemas\/getCards{id}200ResponseObject"},"example":{"id":1,"name":"BankCard","number":1500001000300201,"balance":0,"finished_at":"2016-11-11 11:11:11"}}}}},"security":[],"description":"","deprecated":false,"summary":"get"}},"\/cards\/{id}\/freeze":{"put":{"tags":["cards"],"consumes":["application\/json"],"produces":["text\/html; charset=UTF-8","application\/json"],"parameters":[{"in":"path","name":"id","description":"regexp: [0-9]+","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Operation successfully done","content":{"text\/html; charset=UTF-8":{"schema":{"type":"object","$ref":"#\/components\/schemas\/putCards{id}freeze200ResponseObject"},"example":"[]"}}},"400":{"description":"Bad Request","content":{"application\/json":{"schema":{"type":"object","$ref":"#\/components\/schemas\/putCards{id}freeze400ResponseObject"},"example":{"message":"Card is not in Active status"}}}},"404":{"description":"This entity not found","content":{"application\/json":{"schema":{"type":"object","$ref":"#\/components\/schemas\/putCards{id}freeze404ResponseObject"},"example":{"message":"Card does not exist"}}}},"401":{"description":"Unauthorized","content":{"application\/json":{"schema":{"type":"object","$ref":"#\/components\/schemas\/putCards{id}freeze401ResponseObject"},"example":{"message":"Unauthenticated."}}}},"403":{"description":"Forbidden","content":{"application\/json":{"schema":{"type":"object","$ref":"#\/components\/schemas\/putCards{id}freeze403ResponseObject"},"example":{"message":"This action is unauthorized."}}}}},"security":[],"description":"","deprecated":false,"summary":"freeze"}},"\/cards\/{id}\/unfreeze":{"put":{"tags":["cards"],"consumes":["application\/json"],"produces":["text\/html; charset=UTF-8","application\/json"],"parameters":[{"in":"path","name":"id","description":"regexp: [0-9]+","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Operation successfully done","content":{"text\/html; charset=UTF-8":{"schema":{"type":"object","$ref":"#\/components\/schemas\/putCards{id}unfreeze200ResponseObject"},"example":"[]"}}},"400":{"description":"Bad Request","content":{"application\/json":{"schema":{"type":"object","$ref":"#\/components\/schemas\/putCards{id}unfreeze400ResponseObject"},"example":{"message":"Card is not in Freeze status"}}}},"401":{"description":"Unauthorized","content":{"application\/json":{"schema":{"type":"object","$ref":"#\/components\/schemas\/putCards{id}unfreeze401ResponseObject"},"example":{"message":"Unauthenticated."}}}},"403":{"description":"Forbidden","content":{"application\/json":{"schema":{"type":"object","$ref":"#\/components\/schemas\/putCards{id}unfreeze403ResponseObject"},"example":{"message":"This action is unauthorized."}}}}},"security":[],"description":"","deprecated":false,"summary":"unfreeze"}},"\/card\/{id}\/reissue":{"post":{"tags":["card"],"consumes":["application\/json"],"produces":["text\/html; charset=UTF-8","application\/json"],"parameters":[{"in":"path","name":"id","description":"regexp: [0-9]+","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Operation successfully done","content":{"text\/html; charset=UTF-8":{"schema":{"type":"object","$ref":"#\/components\/schemas\/postCard{id}reissue200ResponseObject"},"example":"[]"}}},"400":{"description":"Bad Request","content":{"application\/json":{"schema":{"type":"object","$ref":"#\/components\/schemas\/postCard{id}reissue400ResponseObject"},"example":{"message":"Card is not in Active status"}}}},"401":{"description":"Unauthorized","content":{"application\/json":{"schema":{"type":"object","$ref":"#\/components\/schemas\/postCard{id}reissue401ResponseObject"},"example":{"message":"Unauthenticated."}}}},"404":{"description":"This entity not found","content":{"application\/json":{"schema":{"type":"object","$ref":"#\/components\/schemas\/postCard{id}reissue404ResponseObject"},"example":{"message":"Card does not exist"}}}},"403":{"description":"Forbidden","content":{"application\/json":{"schema":{"type":"object","$ref":"#\/components\/schemas\/postCard{id}reissue403ResponseObject"},"example":{"message":"This action is unauthorized."}}}}},"security":[],"description":"","deprecated":false,"summary":"reissue"}},"\/status":{"get":{"tags":["status"],"consumes":[],"produces":["text\/html; charset=UTF-8"],"parameters":[],"responses":{"200":{"description":"OK","content":{"text\/html; charset=UTF-8":{"schema":{"type":"object","$ref":"#\/components\/schemas\/getStatus200ResponseObject"},"example":"[]"}}}},"security":[],"description":""}},"\/webhook\/transactions":{"post":{"tags":["webhook"],"consumes":["application\/json"],"produces":["application\/json"],"parameters":[],"responses":{"403":{"description":"Forbidden","content":{"application\/json":{"schema":{"type":"object","$ref":"#\/components\/schemas\/postWebhooktransactions403ResponseObject"},"example":{"message":"This action is unauthorized."}}}}},"security":[],"description":"","deprecated":false,"requestBody":{"content":{"application\/json":{"schema":{"$ref":"#\/components\/schemas\/webhooktransactionsObject"}}},"description":"","required":true},"summary":"handle webhook"}}},"components":{"schemas":{"registrationObject":{"type":"object","properties":{"first_name":{"type":"string","description":""},"last_name":{"type":"string","description":""},"phone":{"type":"string","description":"unique:users"},"email":{"type":"string","description":"email, unique:users"},"ssn":{"type":"string","description":"regex:\/^\\d{3}-\\d{2}-\\d{4}$\/"},"password":{"type":"string","description":""}},"required":["first_name","last_name","phone","email","ssn","password"],"example":{"first_name":"John","last_name":"Doe","phone":"1236743","email":"zhora_2@mail.ru","ssn":"111-11-2222","password":"Password"}},"postRegistration200ResponseObject":{"type":"object","properties":{"token":{"type":"string"},"ttl":{"type":"integer"},"refresh_ttl":{"type":"integer"},"user":{"type":"array"}}},"postRegistration422ResponseObject":{"type":"object","properties":{"message":{"type":"string"},"errors":{"type":"array"}}},"postRegistration423ResponseObject":{"type":"object","properties":{"message":{"type":"string"}}},"postRegistration424ResponseObject":{"type":"object","properties":{"message":{"type":"string"}}},"loginObject":{"type":"object","properties":{"phone":{"type":"string","description":""},"password":{"type":"string","description":""}},"required":["phone","password"],"example":{"phone":"11111111","password":"password"}},"postLogin200ResponseObject":{"type":"object","properties":{"token":{"type":"string"},"ttl":{"type":"integer"},"refresh_ttl":{"type":"integer"},"user":{"type":"array"}}},"postLogin401ResponseObject":{"type":"object","properties":{"message":{"type":"string"}}},"postLogin423ResponseObject":{"type":"object","properties":{"message":{"type":"string"}}},"postLogin429ResponseObject":{"type":"object","properties":{"message":{"type":"string"}}},"postLogin422ResponseObject":{"type":"object","properties":{"message":{"type":"string"},"errors":{"type":"array"}}},"postCards401ResponseObject":{"type":"object","properties":{"message":{"type":"string"}}},"cardsObject":{"type":"object","properties":{"name":{"type":"string","description":"filled"}},"example":{"name":"Test"}},"postCards201ResponseObject":{"type":"object","properties":{"id":{"type":"integer"},"name":{"type":"string"},"number":{"type":"integer"},"balance":{"type":"integer"},"finished_at":{"type":"string"}}},"postCards422ResponseObject":{"type":"object","properties":{"message":{"type":"string"},"errors":{"type":"array"}}},"getCards{id}401ResponseObject":{"type":"object","properties":{"message":{"type":"string"}}},"getCards{id}404ResponseObject":{"type":"object","properties":{"message":{"type":"string"}}},"getCards{id}403ResponseObject":{"type":"object","properties":{"message":{"type":"string"}}},"getCards{id}200ResponseObject":{"type":"object","properties":{"id":{"type":"integer"},"name":{"type":"string"},"number":{"type":"integer"},"balance":{"type":"integer"},"finished_at":{"type":"string"}}},"getCards200ResponseObject":{"type":"object","properties":{"data":{"type":"array"},"links":{"type":"array"},"meta":{"type":"array"},"to":{"type":"integer"},"total":{"type":"integer"}}},"putCards{id}freeze200ResponseObject":{"type":"object","properties":[]},"putCards{id}freeze400ResponseObject":{"type":"object","properties":{"message":{"type":"string"}}},"putCards{id}freeze404ResponseObject":{"type":"object","properties":{"message":{"type":"string"}}},"putCards{id}freeze401ResponseObject":{"type":"object","properties":{"message":{"type":"string"}}},"putCards{id}freeze403ResponseObject":{"type":"object","properties":{"message":{"type":"string"}}},"putCards{id}unfreeze200ResponseObject":{"type":"object","properties":[]},"putCards{id}unfreeze400ResponseObject":{"type":"object","properties":{"message":{"type":"string"}}},"putCards{id}unfreeze401ResponseObject":{"type":"object","properties":{"message":{"type":"string"}}},"putCards{id}unfreeze403ResponseObject":{"type":"object","properties":{"message":{"type":"string"}}},"postCard{id}reissue200ResponseObject":{"type":"object","properties":[]},"postCard{id}reissue400ResponseObject":{"type":"object","properties":{"message":{"type":"string"}}},"postCard{id}reissue401ResponseObject":{"type":"object","properties":{"message":{"type":"string"}}},"postCard{id}reissue404ResponseObject":{"type":"object","properties":{"message":{"type":"string"}}},"postCard{id}reissue403ResponseObject":{"type":"object","properties":{"message":{"type":"string"}}},"getStatus200ResponseObject":{"type":"object","properties":[]},"webhooktransactionsObject":{"type":"object","properties":{"name":{"type":"string","description":""},"card_number":{"type":"integer","description":"digits:16"},"amount":{"type":"integer","description":"min:0"},"type":{"type":"string","description":"in:incoming,outgoing"}},"required":["name","card_number","amount","type"],"example":{"name":"Amazon","card_number":8017750303723171,"amount":1,"type":"outgoing"}},"postWebhooktransactions403ResponseObject":{"type":"object","properties":{"message":{"type":"string"}}}}},"info":{"description":"This is automatically collected documentation","version":"0.0.0","title":"PillarBank","termsOfService":"","contact":{"email":"your@mail.com"}}}